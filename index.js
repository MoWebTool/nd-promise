!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ndpromise=t():e.ndpromise=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){(function(o){"use strict";function r(e){if("object"!==d(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._progress=null,this._deferreds=[],a(e,u.bind(this),c.bind(this),s.bind(this))}function i(e){var t=this;return null===this._state?(this._deferreds.push(e),void(e.onProgress&&null!==t._progress&&o(function(){e.onProgress(t._progress)}))):void o(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return void(t._state?e.resolve:e.reject)(t._value);var o=void 0;try{o=n(t._value)}catch(r){return console.log("e41",r),void e.reject(r)}e.resolve(o)})}function u(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===("undefined"==typeof e?"undefined":d(e))||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void a(t.bind(e),u.bind(this),c.bind(this),s.bind(this))}this._state=!0,this._value=e,l.call(this)}catch(n){console.log("e66",n),c.call(this,n)}}function c(e){this._state=!1,this._value=e,l.call(this)}function s(e){this._progress=e,l.call(this,!0)}function l(e){for(var t=0,n=this._deferreds.length;n>t;t++)i.call(this,this._deferreds[t]);e||(this._deferreds=null)}function f(e,t,n,o,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.onProgress="function"==typeof n?n:null,this.resolve=o,this.reject=r,this.notify=i}function a(e,t,n,o){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))},function(e){r||o(e)})}catch(i){if(console.log("e122",i),r)return;r=!0,n(i)}}var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),n(3);var p=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};r.prototype["catch"]=function(e){return this.then(null,e)},r.prototype["finally"]=function(e){return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})})},r.prototype.progress=function(e){return this.then(null,null,e)},r.prototype.then=function(e,t,n){var o=this;return new r(function(r,u,c){i.call(o,new f(e,t,n,r,u,c))})},r.all=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return 1===t.length&&p(t[0])&&(t=t[0]),new r(function(e,n,o){function r(u,c){try{if(c&&("object"===("undefined"==typeof c?"undefined":d(c))||"function"==typeof c)){var s=c.then;if("function"==typeof s)return void s.call(c,function(e){r(u,e)},n,o)}t[u]=c,console.log("************",c,i),--i<0&&(console.log("remaining",i),e(t))}catch(l){console.log("e178",l),n(l)}}if(0===t.length)return e([]);for(var i=t.length,u=0;u<t.length;u++)r(u,t[u])})},r.resolve=function(e){return e&&"object"===("undefined"==typeof e?"undefined":d(e))&&e.constructor===r?e:new r(function(t){return t(e)})},r.reject=function(e){return new r(function(t,n){return n(e)})},r.notify=function(e){return new r(function(t,n,o){return o(e)})},r.race=function(e){return new r(function(t,n,o){for(var i=0,u=e.length;u>i;i++)r.resolve(e[i]).then(t,n,o)})},t["default"]=r,e.exports=t["default"]}).call(t,n(1).setImmediate)},function(e,t,n){(function(e,o){function r(e,t){this._id=e,this._clearFn=t}var i=n(2).nextTick,u=Function.prototype.apply,c=Array.prototype.slice,s={},l=0;t.setTimeout=function(){return new r(u.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(u.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var n=l++,o=arguments.length<2?!1:c.call(arguments,1);return s[n]=!0,i(function(){s[n]&&(o?e.apply(null,o):e.call(null),t.clearImmediate(n))}),n},t.clearImmediate="function"==typeof o?o:function(e){delete s[e]}}).call(t,n(1).setImmediate,n(1).clearImmediate)},function(e,t){function n(){l=!1,u.length?s=u.concat(s):f=-1,s.length&&o()}function o(){if(!l){var e=setTimeout(n);l=!0;for(var t=s.length;t;){for(u=s,s=[];++f<t;)u&&u[f].run();f=-1,t=s.length}u=null,l=!1,clearTimeout(e)}}function r(e,t){this.fun=e,this.array=t}function i(){}var u,c=e.exports={},s=[],l=!1,f=-1;c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new r(e,t)),1!==s.length||l||setTimeout(o,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=i,c.addListener=i,c.once=i,c.off=i,c.removeListener=i,c.removeAllListeners=i,c.emit=i,c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(e,t,n){(function(e,t,n){!function(e,t){"use strict";function o(e){return m[h]=r.apply(t,e),h++}function r(e){var n=[].slice.call(arguments,1);return function(){"function"==typeof e?e.apply(t,n):new Function(""+e)()}}function i(e){if(v)setTimeout(r(i,e),0);else{var t=m[e];if(t){v=!0;try{t()}finally{u(e),v=!1}}}}function u(e){delete m[e]}function c(){p=function(){var e=o(arguments);return n.nextTick(r(i,e)),e}}function s(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function l(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),p=function(){var n=o(arguments);return e.postMessage(t+n,"*"),n}}function f(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;i(t)},p=function(){var t=o(arguments);return e.port2.postMessage(t),t}}function a(){var e=y.documentElement;p=function(){var t=o(arguments),n=y.createElement("script");return n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n),t}}function d(){p=function(){var e=o(arguments);return setTimeout(r(i,e),0),e}}if(!e.setImmediate){var p,h=1,m={},v=!1,y=e.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(e);g=g&&g.setTimeout?g:e,"[object process]"==={}.toString.call(e.process)?c():s()?l():e.MessageChannel?f():y&&"onreadystatechange"in y.createElement("script")?a():d(),g.setImmediate=p,g.clearImmediate=u}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,function(){return this}(),n(1).clearImmediate,n(2))}])});